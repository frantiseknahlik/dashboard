<div class="weather-widget">
    <div class="weather-city" id="weather-city">Načítám...</div>
    <div class="weather-temp" id="weather-temp">--°C</div>
    <div class="weather-desc" id="weather-desc">Načítám...</div>
</div>

<style>
.weather-widget {
    width: 220px;
    padding: 20px;
    border-radius: 15px;
    background: var(--widget-bg);
    color: var(--text-color);
    font-family: 'Arial', sans-serif;
    text-align: center;
    border: 1px solid #99d6ff;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s, box-shadow 0.3s;
    cursor: default;
}

.weather-widget:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.2);
}

.weather-city {
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 10px;
}

.weather-temp {
    font-size: 40px;
    font-weight: 800;
    margin-bottom: 8px;
    color: #01579b;
}

.weather-desc {
    font-size: 16px;
    font-weight: 500;
    background: rgba(255,255,255,0.3);
    padding: 5px 10px;
    border-radius: 10px;
    display: inline-block;
    transition: background 0.3s;
}

.weather-desc:hover {
    background: rgba(255,255,255,0.5);
}
</style>

<script>
// Odkazy na prvky
let tempEl = document.getElementById("weather-temp");
let descEl = document.getElementById("weather-desc");
let cityEl = document.getElementById("weather-city");

// Souřadnice Uherského Hradiště
let lat = 49.0698;
let long = 17.4595;

// API pro počasí
let weatherUrl = "https://api.open-meteo.com/v1/forecast?latitude=" +
    lat + "&longitude=" + long + "&current_weather=true";

// Načtení počasí
fetch(weatherUrl)
    .then(function(response) {
        return response.json();
    })
    .then(function(data) {
        let temp = data.current_weather.temperature;
        let code = data.current_weather.weathercode;

        tempEl.textContent = temp + "°C";
        descEl.textContent = getWeatherDescription(code);
    });

// API pro název města
let geoUrl = "https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=" +
    lat + "&longitude=" + long + "&localityLanguage=cs";

fetch(geoUrl)
    .then(function(response) {
        return response.json();
    })
    .then(function(data) {
        cityEl.textContent = data.city || data.locality || "Neznámé místo";
    });

// Funkce pro převod kódu počasí
function getWeatherDescription(code) {
    if (code === 0) return "Jasno";
    if (code >= 1 && code <= 3) return "Polojasno";
    if (code >= 45 && code <= 48) return "Mlha";
    if (code >= 51 && code <= 67) return "Déšť";
    if (code >= 71 && code <= 77) return "Sníh";
    if (code >= 95) return "Bouřka";
    return "Neznámé";
}
</script>
