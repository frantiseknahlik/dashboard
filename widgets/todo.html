<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="UTF-8">
<title>Todo Widget</title>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<style>


.todo-widget {
    background: var(--widget-bg);
    padding: 15px;
    border-radius: 10px;
    width: 250px;
    color: var(--text-color);
}

h3 {
    text-align: center;
    margin: 0 0 10px 0;
}

.input-group {
    display: flex;
    gap: 5px;
    margin-bottom: 10px;
}

input {
    flex: 1;
    padding: 5px;
}

button {
    padding: 5px 10px;
    border: none;
    background: #0288d1;
    color: #fff;
    cursor: pointer;
    border-radius: 5px;
}

button:hover {
    background: #01579b;
}

ul {
    list-style: none;
    padding: 0;
}

li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #fff;
    padding: 5px 8px;
    margin-bottom: 5px;
    border-radius: 5px;
}

.completed span {
    text-decoration: line-through;
    opacity: 0.6;
}

.delete-btn {
    background: none;
    border: none;
    color: red;
    cursor: pointer;
}

.add-btn {
    background: var(--widget-bg);
    color: var(--text-color);
}

.add-list{
    background: var(--widget-bg);
    color: var(--text-color);
}
</style>
</head>
<body>

<div class="todo-widget" x-data="todoWidget()" x-init="init()">
    <h3>Úkoly</h3>
    <div class="input-group">
        <input type="text" x-model="newTodo" @keyup.enter="add()" placeholder="Nový úkol..." class="add-btn"> 
        <button @click="add()">+</button>
    </div>
    <ul>
        <template x-for="todo in todos" :key="todo.id">
            <li :class="{ 'completed': todo.completed }" class="add-list">
                <div>
                    <input type="checkbox" x-model="todo.completed">
                    <span x-text="todo.text"></span>
                </div>
                <button @click="remove(todo.id)" class="delete-btn">&times;</button>
            </li>
        </template>
    </ul>
</div>

<script>
function todoWidget() {
    return {
        newTodo: '',
        todos: JSON.parse(localStorage.getItem('todos') || '[]'),

        init() {
            this.$watch('todos', value => localStorage.setItem('todos', JSON.stringify(value)));
        },

        add() {
            if (!this.newTodo.trim()) return;
            this.todos.push({ id: Date.now(), text: this.newTodo, completed: false });
            this.newTodo = '';
        },

        remove(id) {
            this.todos = this.todos.filter(todo => todo.id !== id);
        }
    }
}
</script>

</body>
</html>
